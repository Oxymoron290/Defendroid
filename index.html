<html>
    <head>
        <style>
            body{
                background-color:black;
            }
            .playarea
            {
                background-color:#343434;
            }
        </style>
        <script src="node_modules\data-pixels\DataPixels.js"></script>
        <script src="entities\Starship.js"></script>
        <script src="entities\Lander.js"></script>
        <script src="entities\Mutant.js"></script>
        <script src="entities\Baiter.js"></script>
        <script src="entities\Bomber.js"></script>
        <script src="entities\Pod.js"></script>
        <script src="entities\Swarmer.js"></script>
    </head>
    <body onkeydown="keyDown(event)" onkeyup="keyUp(event)">
    </body>
    <canvas id="graphics" class="playarea" width=800 height=640></canvas>
    <script>
        var direction = Object.freeze({"Left":true, "Right":false});
        var scale = 3;
        var speed = 5;
        var gameCanvas = document.getElementById("graphics");
        var graphics = gameCanvas.getContext('2d');

        var player = new Starship(100, 100, scale, speed);
        var lander = new Lander(500, 100, scale, speed);

        var isLeft = false;
        var isRight = false;
        var reverse = false;

        // Event
        function keyDown(e){
            if (e.keyCode == '32') {
                // space bar
                reverse = true;
            }
            if (e.keyCode == '38') {
                // up arrow
            }
            if (e.keyCode == '40') {
                // down arrow
            }
            if (e.keyCode == '37') {
                // left arrow
                isLeft = true;
            }
            if (e.keyCode == '39') {
                // right arrow
                isRight = true;
            }
        }

        function keyUp(e){
            if (e.keyCode == '38') {
                // up arrow
            }
            if (e.keyCode == '40') {
                // down arrow
            }
            if (e.keyCode == '37') {
                // left arrow
                isLeft = false;
            }
            if (e.keyCode == '39') {
                // right arrow
                isRight = false;
            }
        }

        // Main Loop
        (function MainLoop() {
            // pre adjustments
            player.X += player.Velocity_X;
            player.Y += player.Velocity_Y;
            if(reverse){
                player.flip();
                reverse = false;
            }

            // logic
            if(isLeft) player.Velocity_X = -Math.abs(player.Speed);
            if(isRight) player.Velocity_X = Math.abs(player.Speed);
            if(!isLeft && !isRight) player.Velocity_X = 0;

            // post adjustments

            //rendering
            graphics.clearRect(0,0, gameCanvas.width, gameCanvas.height);
            graphics.drawImage(player.Sprite, player.X, player.Y);
            graphics.drawImage(lander.Sprite, lander.X, player.Y);
            setTimeout(MainLoop, 1000/60);
        }());
    </script>
</html>